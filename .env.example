# ──────────────────────────────────────────────
# Rumi Magic Cookbook — Environment Variables
# ──────────────────────────────────────────────
# Copy this file to .env.local and fill in values.
# NEVER commit .env.local to git.
# ──────────────────────────────────────────────

# ── Database ──────────────────────────────────
# Neon (prod): get from neon.tech dashboard
# Local: postgresql://user:password@localhost:5432/rumi
DATABASE_URL="postgresql://user:password@host:5432/rumi?sslmode=require"

# ── OpenAI ────────────────────────────────────
# Get from: platform.openai.com → API Keys
# CRITICAL: Never prefix with NEXT_PUBLIC_
OPENAI_API_KEY="sk-..."

# ── Parent PIN ────────────────────────────────
# Pre-compute the bcrypt hash of your 6+ digit PIN:
#   node -e "require('bcryptjs').hash('YOUR_PIN', 12).then(h => console.log(h))"
# Paste the full $2a$... or $2b$... hash here.
ADMIN_PIN_HASH="$2b$12$..."

# ── Session Signing ──────────────────────────
# Generate a random 64-char hex secret:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET="your-64-char-hex-string-here"

# ── Cron Security ─────────────────────────────
# Vercel cron jobs send this as a header to verify the request is legitimate.
# Generate:
#   node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
CRON_SECRET="your-32-char-hex-string-here"

# ── Image Generation ────────────────────────
# Model, quality, and size for OpenAI image generation (at approve time).
# Allowed IMAGE_MODEL: gpt-image-1.5 (default), gpt-image-1, gpt-image-1-mini.
# Allowed IMAGE_QUALITY: medium (default), low.
# Allowed IMAGE_SIZE: 1024x1024 only.
IMAGE_MODEL="gpt-image-1.5"
# IMAGE_MODEL="gpt-image-1-mini"   # cheaper alternative
IMAGE_QUALITY="medium"
# IMAGE_QUALITY="low"              # cheaper alternative
IMAGE_SIZE="1024x1024"

# ── Rate Limits ─────────
MAX_DAILY_PER_DEVICE=10
MAX_DAILY_PER_IP=20
MAX_DAILY_GLOBAL=100
