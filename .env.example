# ──────────────────────────────────────────────
# Rumi Magic Cookbook — Environment Variables
# ──────────────────────────────────────────────
# Copy this file to .env.local and fill in values.
# NEVER commit .env.local to git.
# ──────────────────────────────────────────────

# ── Database ──────────────────────────────────
# Neon (prod): get from neon.tech dashboard
# Local: postgresql://user:password@localhost:5432/rumi
DATABASE_URL="postgresql://user:password@host:5432/rumi?sslmode=require"

# ── OpenAI ────────────────────────────────────
# Get from: platform.openai.com → API Keys
# CRITICAL: Never prefix with NEXT_PUBLIC_
# NOTE: OPENAI_MODEL is not used by the current codebase (legacy var). Use IMAGE_MODEL below.
OPENAI_API_KEY="sk-..."

# ── Parent PIN ────────────────────────────────
# Recommended: npm run setup:admin-pin (writes to .env.development.local)
# Manual: node -e "require('bcryptjs').hash('YOUR_PIN', 12).then(h => console.log(h))"
#   ⚠ Escape every $ as \$ in .env files (Next.js dotenv expansion).
ADMIN_PIN_HASH="$2b$12$..."

# ── Session Signing ──────────────────────────
# Recommended: npm run setup:session-secret (must be 32+ chars)
# One-shot: npm run setup:dev-secrets (sets both PIN hash and session secret)
SESSION_SECRET="your-64-char-hex-string-here"

# ── Cron Security ─────────────────────────────
# Vercel cron jobs send this as a header to verify the request is legitimate.
# Generate:
#   node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
CRON_SECRET="your-32-char-hex-string-here"

# ── Image Generation ────────────────────────
# Model, quality, and size for OpenAI image generation (at approve time).
# These are optional; safe defaults are used if omitted.
# Allowed IMAGE_MODEL: gpt-image-1.5 (default), gpt-image-1, gpt-image-1-mini.
# Allowed IMAGE_QUALITY: medium (default), low.
# Allowed IMAGE_SIZE: 1024x1024 only.
IMAGE_MODEL="gpt-image-1.5"
# IMAGE_MODEL="gpt-image-1-mini"   # cheaper alternative
IMAGE_QUALITY="medium"
# IMAGE_QUALITY="low"              # cheaper alternative
IMAGE_SIZE="1024x1024"

# ── Rate Limits (optional; defaults shown) ─────────
MAX_DAILY_PER_DEVICE=10
MAX_DAILY_PER_IP=20
MAX_DAILY_GLOBAL=100
